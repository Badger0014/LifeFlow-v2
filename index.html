<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Personal Life Dashboard (Functional)</title>
    <style>
        /* --- CSS STYLES --- */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 0; background-color: #e9eef2; color: #333; }
        header { background-color: #2c3e50; color: white; padding: 25px; text-align: center; }
        .container { display: flex; flex-wrap: wrap; padding: 20px; gap: 20px; max-width: 1300px; margin: 0 auto; }
        .widget { background-color: white; padding: 20px; border-radius: 12px; box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1); flex: 1 1 300px; min-height: 280px; transition: transform 0.2s; }
        .widget:hover { transform: translateY(-3px); }
        h2 { color: #2c3e50; border-bottom: 2px solid #ecf0f1; padding-bottom: 10px; margin-top: 0; }
        
        /* Form/Input Styles */
        input[type="text"], input[type="number"], textarea, button { 
            padding: 10px; margin-bottom: 10px; border-radius: 5px; border: 1px solid #bdc3c7; width: calc(100% - 22px); box-sizing: border-box; 
        }
        button { background-color: #3498db; color: white; cursor: pointer; border: none; transition: background-color 0.2s; }
        button:hover { background-color: #2980b9; }

        /* To-Do List Styles */
        #todo-list { list-style: none; padding: 0; }
        #todo-list li { padding: 10px; border-bottom: 1px dotted #ccc; display: flex; justify-content: space-between; align-items: center; }
        #todo-list li.completed span { text-decoration: line-through; color: #95a5a6; }
        .complete-btn { background: none; border: none; color: #2ecc71; cursor: pointer; font-size: 1.2em; width: auto; margin-right: 10px; }

        /* Expense List Styles */
        #expense-list { list-style: none; padding: 0; }
        #expense-list li { padding: 5px 0; border-bottom: 1px dotted #ecf0f1; display: flex; justify-content: space-between; font-size: 0.9em; }
        .expense-amount { font-weight: bold; }
        .positive { color: #27ae60; }
        .negative { color: #c0392b; }
        #balance { font-size: 1.5em; font-weight: bold; margin-top: 10px; }
    </style>
</head>
<body>

    <header>
        <h1>üöÄ Life Manager Dashboard</h1>
        <p>Your centralized hub for tracking goals, notes, and finances.</p>
    </header>

    <div class="container">

        <div class="widget" id="todo-widget">
            <h2>üìö Tasks & Reminders</h2>
            <input type="text" id="todo-input" placeholder="Add new task or study reminder...">
            <button onclick="addTask()">Add Task</button>
            <ul id="todo-list">
                </ul>
        </div>

        <div class="widget" id="expense-widget">
            <h2>üí∞ Financial Tracker</h2>
            <input type="text" id="expense-desc" placeholder="Description (e.g., Groceries, Salary)">
            <input type="number" id="expense-amount" placeholder="Amount (+ for Income, - for Expense)">
            <button onclick="addTransaction()">Log Transaction</button>
            
            <p>Current Balance:</p>
            <div id="balance" class="positive">$0.00</div>
            
            <h3>History</h3>
            <ul id="expense-list">
                </ul>
        </div>

        <div class="widget" id="journal-widget">
            <h2>‚úçÔ∏è Daily Journal</h2>
            <p>Today's Log (Saves automatically):</p>
            <textarea id="journal-text" rows="10" placeholder="What happened today? What did you learn?"></textarea>
            <p style="font-size: 0.8em; color: #7f8c8d;">*Text is saved instantly to your browser.*</p>
        </div>

    </div>

    <script>
        // --- JAVASCRIPT LOGIC ---

        // ===================================
        // 1. JOURNAL LOGIC (Saves instantly)
        // ===================================
        const journalTextarea = document.getElementById('journal-text');
        
        // Load journal text on page load
        journalTextarea.value = localStorage.getItem('journalText') || '';

        // Save journal text whenever user types (input event)
        journalTextarea.addEventListener('input', () => {
            localStorage.setItem('journalText', journalTextarea.value);
        });

        // ===================================
        // 2. TO-DO / REMINDER LOGIC
        // ===================================
        const todoInput = document.getElementById('todo-input');
        const todoList = document.getElementById('todo-list');
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];

        function saveTasks() {
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }

        function renderTasks() {
            todoList.innerHTML = ''; // Clear the current list
            tasks.forEach((task, index) => {
                const li = document.createElement('li');
                li.className = task.completed ? 'completed' : '';
                
                // Toggle button
                const toggleBtn = document.createElement('button');
                toggleBtn.className = 'complete-btn';
                toggleBtn.innerHTML = task.completed ? '‚úì' : '‚òê';
                toggleBtn.onclick = () => toggleTask(index);

                // Task text
                const span = document.createElement('span');
                span.textContent = task.text;

                li.appendChild(toggleBtn);
                li.appendChild(span);
                todoList.appendChild(li);
            });
        }

        function addTask() {
            const text = todoInput.value.trim();
            if (text) {
                tasks.push({ text: text, completed: false });
                saveTasks();
                renderTasks();
                todoInput.value = ''; // Clear input
            }
        }

        function toggleTask(index) {
            tasks[index].completed = !tasks[index].completed;
            saveTasks();
            renderTasks();
        }

        // Initial render for To-Dos
        renderTasks();

        // ===================================
        // 3. EXPENSE TRACKER LOGIC
        // ===================================
        const expenseDesc = document.getElementById('expense-desc');
        const expenseAmount = document.getElementById('expense-amount');
        const expenseList = document.getElementById('expense-list');
        const balanceDisplay = document.getElementById('balance');
        let transactions = JSON.parse(localStorage.getItem('transactions')) || [];

        function saveTransactions() {
            localStorage.setItem('transactions', JSON.stringify(transactions));
        }

        function calculateBalance() {
            const balance = transactions.reduce((acc, trans) => acc + trans.amount, 0);
            balanceDisplay.textContent = `$${balance.toFixed(2)}`;
            balanceDisplay.className = balance >= 0 ? 'positive' : 'negative';
        }

        function renderTransactions() {
            expenseList.innerHTML = '';
            transactions.slice(-5).reverse().forEach(trans => { // Show last 5 transactions
                const li = document.createElement('li');
                const sign = trans.amount < 0 ? '-' : '+';
                const amountClass = trans.amount < 0 ? 'negative' : 'positive';

                li.innerHTML = `
                    <span>${trans.desc}</span>
                    <span class="expense-amount ${amountClass}">${sign}$${Math.abs(trans.amount).toFixed(2)}</span>
                `;
                expenseList.appendChild(li);
            });
            calculateBalance();
        }

        function addTransaction() {
            const desc = expenseDesc.value.trim();
            const amount = parseFloat(expenseAmount.value);

            if (desc && !isNaN(amount) && amount !== 0) {
                transactions.push({ desc, amount });
                saveTransactions();
                renderTransactions();
                expenseDesc.value = '';
                expenseAmount.value = '';
            } else {
                alert('Please enter a valid description and amount.');
            }
        }

        // Initial render for Expenses
        renderTransactions();
    </script>
</body>
</html>
