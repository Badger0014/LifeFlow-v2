<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Life Dashboard - V2</title>
    <style>
        /* --- CORE CSS: Reset and Layout --- */
        body { font-family: 'Roboto', sans-serif; margin: 0; padding: 0; background-color: #f4f7f9; color: #333; }
        .dashboard-container { display: flex; flex-direction: column; min-height: 100vh; }
        
        /* --- NAVIGATION (Tabs at the bottom, requested by user) --- */
        .nav-bar {
            position: fixed;
            bottom: 0;
            width: 100%;
            background-color: #ffffff;
            box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 1000;
        }
        .nav-link {
            text-decoration: none;
            color: #7f8c8d;
            padding: 8px 15px;
            cursor: pointer;
            transition: color 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 0.8em;
        }
        .nav-link.active, .nav-link:hover {
            color: #3498db;
        }
        
        /* --- PAGE CONTENT --- */
        .content-area { padding: 20px; flex-grow: 1; padding-bottom: 80px; } /* Push content up from nav bar */
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        /* --- WIDGET STYLES --- */
        .card { 
            background-color: white; 
            padding: 25px; 
            border-radius: 10px; 
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05); 
            margin-bottom: 20px; 
        }
        h1, h2 { color: #2c3e50; border-bottom: none; padding-bottom: 0; margin-top: 0; }
        h2 { font-size: 1.5em; margin-bottom: 15px; }
        
        /* --- FORM/INPUT STYLES --- */
        input[type="text"], input[type="number"], textarea, button { 
            padding: 12px; margin-bottom: 10px; border-radius: 6px; border: 1px solid #dcdfe4; width: calc(100% - 24px); box-sizing: border-box; 
        }
        button { background-color: #3498db; color: white; cursor: pointer; border: none; transition: background-color 0.2s; font-weight: bold; }
        button:hover { background-color: #2980b9; }

        /* --- EXPENSE SPECIFIC STYLES --- */
        .balance-box { text-align: center; margin: 20px 0; padding: 15px; border-radius: 8px; background-color: #ecf0f1; }
        #balance-amount { font-size: 2.5em; font-weight: bold; }
        .expense-inputs { display: flex; gap: 10px; }
        .expense-inputs > div { flex: 1; padding: 15px; border-radius: 8px; }
        #income-box { background-color: #e6f7ee; border: 1px solid #2ecc71; }
        #expense-box { background-color: #fce7e7; border: 1px solid #e74c3c; }
        
        /* --- LIST STYLES (To-Do/Transactions) --- */
        .list-group { list-style: none; padding: 0; }
        .list-group li { padding: 12px 0; border-bottom: 1px dotted #e0e6e9; display: flex; justify-content: space-between; align-items: center; }
        .list-group li:last-child { border-bottom: none; }
        .negative-amount { color: #e74c3c; font-weight: bold; }
        .positive-amount { color: #2ecc71; font-weight: bold; }
        .complete-btn { background: none; border: none; color: #2ecc71; cursor: pointer; font-size: 1.1em; margin-right: 10px; }
        .todo-item.completed span { text-decoration: line-through; color: #95a5a6; }

        /* --- HOME PAGE WIDGETS --- */
        .home-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
        .home-widget { text-align: center; padding: 25px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05); }
        .home-widget h3 { margin-top: 0; font-size: 1.2em; color: #3498db; }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

    <div class="dashboard-container">
        
        <div class="content-area">

            <div id="Home" class="tab-content active">
                <h1>üëã Welcome Back!</h1>
                <p>A quick look at your current status.</p>
                <div class="home-grid">
                    <div class="card home-widget" onclick="showTab('Tasks')">
                        <h3><i class="fas fa-check-circle"></i> Tasks Left</h3>
                        <p id="home-task-count" style="font-size: 2em; font-weight: bold;">0</p>
                    </div>
                    <div class="card home-widget" onclick="showTab('Expenses')">
                        <h3><i class="fas fa-wallet"></i> Current Balance</h3>
                        <p id="home-balance-display" style="font-size: 2em; font-weight: bold;">$0.00</p>
                    </div>
                </div>
                
                <div class="card" style="margin-top: 20px;">
                    <h2>üí° Quick Notes</h2>
                    <textarea id="quick-notes-text" rows="5" placeholder="Temporary scratchpad..."></textarea>
                    <p style="font-size: 0.8em; color: #7f8c8d;">*Text is saved instantly to this note.*</p>
                </div>
            </div>

            <div id="Expenses" class="tab-content">
                <div class="card">
                    <h2>üí∞ Financial Tracker</h2>
                    <div class="balance-box">
                        <p>Total Balance</p>
                        <div id="balance-amount" class="positive-amount">$0.00</div>
                    </div>

                    <div class="expense-inputs">
                        <div id="income-box">
                            <h3><i class="fas fa-plus-circle"></i> Add Income</h3>
                            <input type="text" id="income-desc" placeholder="Source (e.g., Paycheck, Gift)">
                            <input type="number" id="income-amount" placeholder="Amount">
                            <button onclick="addTransaction(true)">Log Income</button>
                        </div>
                        <div id="expense-box">
                            <h3><i class="fas fa-minus-circle"></i> Add Expense</h3>
                            <input type="text" id="expense-desc" placeholder="Item (e.g., Groceries, Rent)">
                            <input type="number" id="expense-amount" placeholder="Amount">
                            <button onclick="addTransaction(false)">Log Expense</button>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h2>Transaction History (Last 10)</h2>
                    <ul id="expense-list" class="list-group">
                        </ul>
                </div>
            </div>

            <div id="Tasks" class="tab-content">
                <div class="card">
                    <h2>üìö To-Do & Study Reminders</h2>
                    <input type="text" id="todo-input" placeholder="Add new task or study reminder...">
                    <button onclick="addTask()">Add Task</button>
                    <ul id="todo-list" class="list-group">
                        </ul>
                </div>
            </div>

            <div id="Journal" class="tab-content">
                <div class="card">
                    <h2>‚úçÔ∏è Daily Reflection</h2>
                    <p>Use this space for your journal entries. It saves automatically.</p>
                    <textarea id="journal-text" rows="15" placeholder="How was your day? What did you accomplish?"></textarea>
                    <p style="font-size: 0.8em; color: #7f8c8d; text-align: right;">(Saved to your browser's local storage)</p>
                </div>
            </div>

        </div>

        <div class="nav-bar">
            <a class="nav-link active" onclick="showTab('Home', this)"><i class="fas fa-home"></i>Home</a>
            <a class="nav-link" onclick="showTab('Expenses', this)"><i class="fas fa-wallet"></i>Expenses</a>
            <a class="nav-link" onclick="showTab('Tasks', this)"><i class="fas fa-list-check"></i>Tasks</a>
            <a class="nav-link" onclick="showTab('Journal', this)"><i class="fas fa-book"></i>Journal</a>
        </div>
    </div>

    <script>
        // --- JAVASCRIPT LOGIC ---

        // ===================================
        // 0. TAB NAVIGATION LOGIC
        // ===================================
        function showTab(tabId, clickedElement) {
            // Hide all tab content
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            // Remove active class from all links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });

            // Show the selected tab content
            document.getElementById(tabId).classList.add('active');

            // Set the clicked link as active (if provided)
            if (clickedElement) {
                clickedElement.classList.add('active');
            } else {
                // If called internally (like on load), activate the home link
                document.querySelector('.nav-link').classList.add('active');
            }
        }

        // ===================================
        // 1. DATA INITIALIZATION
        // ===================================
        let transactions = JSON.parse(localStorage.getItem('transactions')) || [];
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];

        // ===================================
        // 2. JOURNAL & QUICK NOTES LOGIC
        // ===================================
        const journalTextarea = document.getElementById('journal-text');
        const quickNotesTextarea = document.getElementById('quick-notes-text');
        
        // Load text on page load
        journalTextarea.value = localStorage.getItem('journalText') || '';
        quickNotesTextarea.value = localStorage.getItem('quickNotesText') || '';

        // Save journal text whenever user types (input event)
        journalTextarea.addEventListener('input', () => {
            localStorage.setItem('journalText', journalTextarea.value);
        });
        quickNotesTextarea.addEventListener('input', () => {
            localStorage.setItem('quickNotesText', quickNotesTextarea.value);
        });


        // ===================================
        // 3. EXPENSE LOGIC
        // ===================================
        const incomeDesc = document.getElementById('income-desc');
        const incomeAmount = document.getElementById('income-amount');
        const expenseDesc = document.getElementById('expense-desc');
        const expenseAmount = document.getElementById('expense-amount');
        const expenseList = document.getElementById('expense-list');
        const balanceAmountDisplay = document.getElementById('balance-amount');
        const homeBalanceDisplay = document.getElementById('home-balance-display');


        function saveTransactions() {
            localStorage.setItem('transactions', JSON.stringify(transactions));
        }

        function calculateBalance() {
            const balance = transactions.reduce((acc, trans) => acc + trans.amount, 0);
            const formattedBalance = `$${balance.toFixed(2)}`;

            balanceAmountDisplay.textContent = formattedBalance;
            balanceAmountDisplay.className = balance >= 0 ? 'positive-amount' : 'negative-amount';
            
            // Update Home Widget
            homeBalanceDisplay.textContent = formattedBalance;
            homeBalanceDisplay.style.color = balance >= 0 ? '#2ecc71' : '#e74c3c';

            return balance;
        }

        function renderTransactions() {
            expenseList.innerHTML = '';
            // Only show the 10 most recent transactions
            transactions.slice(-10).reverse().forEach(trans => {
                const li = document.createElement('li');
                const sign = trans.amount < 0 ? '-' : '+';
                const amountClass = trans.amount < 0 ? 'negative-amount' : 'positive-amount';

                li.innerHTML = `
                    <span>${trans.desc}</span>
                    <span class="${amountClass}">${sign}$${Math.abs(trans.amount).toFixed(2)}</span>
                `;
                expenseList.appendChild(li);
            });
            calculateBalance();
        }

        // isIncome is a boolean: true for income, false for expense
        function addTransaction(isIncome) {
            let desc, amountValue, amount;

            if (isIncome) {
                desc = incomeDesc.value.trim();
                amountValue = parseFloat(incomeAmount.value);
                amount = Math.abs(amountValue); // Income is always positive
            } else {
                desc = expenseDesc.value.trim();
                amountValue = parseFloat(expenseAmount.value);
                // Expense is always negative, hence the -1 multiplier
                amount = -1 * Math.abs(amountValue);
            }

            if (desc && !isNaN(amountValue) && amountValue > 0) {
                transactions.push({ desc, amount, date: new Date().toLocaleDateString() });
                saveTransactions();
                renderTransactions();
                
                // Clear inputs
                if (isIncome) {
                    incomeDesc.value = '';
                    incomeAmount.value = '';
                } else {
                    expenseDesc.value = '';
                    expenseAmount.value = '';
                }
            } else {
                alert('Please enter a valid description and a positive amount.');
            }
        }
        
        // ===================================
        // 4. TO-DO / REMINDER LOGIC
        // ===================================
        const todoInput = document.getElementById('todo-input');
        const todoList = document.getElementById('todo-list');
        const homeTaskCount = document.getElementById('home-task-count');


        function saveTasks() {
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }

        function renderTasks() {
            todoList.innerHTML = ''; // Clear the current list
            const incompleteTasks = tasks.filter(t => !t.completed).length;
            homeTaskCount.textContent = incompleteTasks;
            
            tasks.forEach((task, index) => {
                const li = document.createElement('li');
                li.className = task.completed ? 'todo-item completed' : 'todo-item';
                
                // Toggle button (‚úì or ‚òê)
                const toggleBtn = document.createElement('button');
                toggleBtn.className = 'complete-btn';
                toggleBtn.innerHTML = task.completed ? '<i class="fas fa-check-square"></i>' : '<i class="far fa-square"></i>';
                toggleBtn.onclick = () => toggleTask(index);

                // Task text
                const span = document.createElement('span');
                span.textContent = task.text;

                li.appendChild(toggleBtn);
                li.appendChild(span);
                todoList.appendChild(li);
            });
            saveTasks(); // Save after rendering updates the incomplete count
        }

        function addTask() {
            const text = todoInput.value.trim();
            if (text) {
                tasks.push({ text: text, completed: false });
                renderTasks();
                todoInput.value = ''; // Clear input
            }
        }

        function toggleTask(index) {
            tasks[index].completed = !tasks[index].completed;
            // Optionally, sort completed tasks to the bottom:
            tasks.sort((a, b) => a.completed - b.completed); 
            renderTasks();
        }

        // ===================================
        // 5. INITIAL PAGE SETUP
        // ===================================
        function initDashboard() {
            showTab('Home'); // Start on the Home tab
            renderTransactions();
            renderTasks();
        }

        window.onload = initDashboard;
    </script>
</body>
</html>
